!function(e){function t(t){for(var o,i,l=t[0],c=t[1],s=t[2],f=0,p=[];f<l.length;f++)i=l[f],r[i]&&p.push(r[i][0]),r[i]=0;for(o in c)Object.prototype.hasOwnProperty.call(c,o)&&(e[o]=c[o]);for(u&&u(t);p.length;)p.shift()();return a.push.apply(a,s||[]),n()}function n(){for(var e,t=0;t<a.length;t++){for(var n=a[t],o=!0,l=1;l<n.length;l++){var c=n[l];0!==r[c]&&(o=!1)}o&&(a.splice(t--,1),e=i(i.s=n[0]))}return e}var o={},r={0:0},a=[];function i(t){if(o[t])return o[t].exports;var n=o[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,i),n.l=!0,n.exports}i.m=e,i.c=o,i.d=function(e,t,n){i.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},i.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},i.t=function(e,t){if(1&t&&(e=i(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(i.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)i.d(n,o,function(t){return e[t]}.bind(null,o));return n},i.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return i.d(t,"a",t),t},i.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},i.p="/";var l=window.webpackJsonp=window.webpackJsonp||[],c=l.push.bind(l);l.push=t,l=l.slice();for(var s=0;s<l.length;s++)t(l[s]);var u=c;a.push([242,1]),n()}({113:function(e,t,n){var o=n(186);"string"==typeof o&&(o=[[e.i,o,""]]);var r={hmr:!0,transform:void 0,insertInto:void 0};n(96)(o,r);o.locals&&(e.exports=o.locals)},135:function(e,t){},136:function(e,t,n){(e.exports=n(95)(!1)).push([e.i,'.header {\n  height: 80px;\n  background-color: #0696d3;\n}\n.header .title {\n  font-size: 34px;\n  font-weight: bold;\n  color: #fff;\n  font-family: "Microsoft YaHei", "Lucida Sans Unicode", "Myriad Pro", "Hiragino Sans GB", "Heiti SC", Verdana, simsun;\n  line-height: 80px;\n  text-align: center;\n}\n.monitor-frame {\n  width: 900px;\n  /*height: 550px;*/\n  margin-left: auto;\n  margin-right: auto;\n  /* border: 1px solid #d9d9d9; */\n  color: #707070;\n}\n.monitor-file {\n  height: 50px;\n  line-height: 50px;\n  padding-left: 20px;\n  color: #707070;\n  /* border-bottom: 1px solid #d9d9d9; */\n}\n.dir-img {\n  float: left;\n  height: 30px;\n  width: 30px;\n  margin-left: 10px;\n  margin-top: 10px;\n  margin-right: 10px;\n}\n.chess-container {\n  background-color: peru;\n}\n.chess-container .ant-row {\n  /* height: 100px !important; */\n  line-height: 100px !important;\n}\n.ant-col-3 {\n  border: 1px solid;\n  padding-top: 10px !important;\n  padding-left: 20px !important;\n}\n.ant-btn-circle,\n.ant-btn-circle-outline {\n  width: 70px !important;\n  height: 70px !important;\n  /* background-color: tan !important; */\n  font-size: 30px !important;\n  font-family: \'楷体\' !important;\n  font-weight: bold !important;\n  /* color: crimson !important; */\n  /* color: black !important; */\n}\n',""])},186:function(e,t,n){(e.exports=n(95)(!1)).push([e.i,'.login-container {\n  width: 1000px;\n  height: 600px;\n  position: absolute;\n  left: 35%;\n  margin-left: -233px;\n  top: 20px;\n  box-shadow: -5px 0 5px #888888, /*左边阴影*/ 5px 0 5px #888888, /*右边阴影*/ 0 -5px 5px #888888, /*顶部阴影*/ 0 5px 5px #888888;\n  /*底边阴影*/\n  opacity: 0.85;\n  filter: alpha(opacity=85);\n}\n.login-title {\n  padding: 50px 28px;\n  /* background: #a40000; */\n  background-color: #0696d3;\n  text-align: center;\n}\n.sysName {\n  font-size: 40px;\n  font-weight: bold;\n  color: #fff;\n  font-family: "Microsoft YaHei", "Lucida Sans Unicode", "Myriad Pro", "Hiragino Sans GB", "Heiti SC", Verdana, simsun;\n}\n.loginForm {\n  margin-top: 100px;\n  margin-left: 100px;\n}\n.loginForm .ant-input {\n  background-color: blanchedalmond;\n  color: black;\n}\n.ant-message {\n  color: black !important;\n}\n.logout {\n  position: absolute;\n  z-index: 999;\n  float: right;\n  line-height: 80px;\n  right: 0;\n  margin-top: -80px;\n  margin-right: 30px;\n  font-weight: bold;\n}\n.logout span {\n  color: #ffffff;\n  margin-right: 20px;\n}\n.layout-operation {\n  height: 80px;\n  line-height: 80px;\n  text-align: center;\n}\n.layout-operation .ant-btn-primary {\n  height: 50px;\n  width: 80px;\n  margin-left: 80px;\n  margin-right: 80px;\n  font-weight: bold;\n}\n',""])},242:function(e,t,n){"use strict";n.r(t);var o=n(6),r=n.n(o),a=n(0),i=n.n(a),l=n(55),c=n(26),s=(n(44),n(17)),u=(n(132),n(10)),f=(n(133),n(119)),p=(n(134),n(120)),m=(n(97),n(30)),h=n(116),d=n.n(h),y={fetch:function(e,t,n,o){var r=this.getPath(),a=this.getHeaders();d()({url:r+e,method:t,headers:a,data:n,type:"json",success:function(e){o(e)},error:function(e){console.log(e),o("error")}})},getTimestamp:function(e){return new Date(e).getTime()/1e3},getHeaders:function(){return{Accept:"*/*",token:localStorage.getItem("token")}},getPath:function(){return""}};n(98);function g(e){return(g="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function b(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function v(e,t){return!t||"object"!==g(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function S(e){return(S=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function I(e,t){return(I=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var O=function(e){function t(e){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(n=v(this,S(t).call(this,e))).state={items:[["","","","","","","",""],["","","","","","","",""],["","","","","","","",""],["","","","","","","",""]],selectedItem:"",selectedOpponentItem:"",selectedItemBackgroudColor:"#6387ea",data:[],started:!1,semaphore:1,role:"CONSUMER"},n}var n,o,r;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&I(e,t)}(t,a["Component"]),n=t,(o=[{key:"fetch",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};y.fetch("/query","get",t,function(t){e.initData(t)})}},{key:"initData",value:function(e){var t=[["","","","","","","",""],["","","","","","","",""],["","","","","","","",""],["","","","","","","",""]];e&&(e.forEach(function(e){t[e.x-1][e.y-1]=e}),this.setState({items:t}))}},{key:"componentDidMount",value:function(){var e=this,t=localStorage.getItem("id");t?(this.fetch(),this.fetchChesserById({id:t}),setInterval(function(){e.fetch(),e.fetchChesserById({id:t})},4e3)):window.location.href="/login"}},{key:"fetchChesserById",value:function(e){var t=this;y.fetch("/queryPersonById","get",e,function(e){var n=e.role,o=e.state;localStorage.setItem("role",n),localStorage.setItem("state",o),o&&n&&t.lockFrame(o,n)})}},{key:"lockFrame",value:function(e,t){var n=0;"ACTIVE"==e&&"CONSUMER"==t?n=1:"ACTIVE"==e&&"PRODUCER"==t?n=0:"LOCK"==e&&"CONSUMER"==t?n=0:"LOCK"==e&&"PRODUCER"==t&&(n=1),this.setState({semaphore:n,role:t})}},{key:"onSelect",value:function(e){if(e)if("NONE"==e.state)this.setState({selectedItem:"",selectedOpponentItem:""}),this.reverseChess(e);else if("DISPLAY"==e.state){if(e.color!==localStorage.getItem("color")&&!this.state.selectedItem)return;if(this.state.selectedItem)this.operateChess(e);else{if(""==e.code)return;this.setState({selectedItem:e})}}}},{key:"operateChess",value:function(e){var t=this.state.selectedItem.x,n=this.state.selectedItem.y;if(this.state.selectedItem.color!=e.color)if(t==e.x||n==e.y){var o=localStorage.getItem("state");"ACTIVE"==o?o="LOCK":"LOCK"==o&&(o="ACTIVE"),this.lockFrame(o,localStorage.getItem("role")),this.fetchAllOver(this.state.selectedItem,e)}else m.a.error("不同行或列的数据不能进行操作");else this.setState({selectedItem:e})}},{key:"fetchAllOver",value:function(e,t){var n=this,o={chessId:e.id,opponentChessId:t.id,personId:localStorage.getItem("id"),opponentId:localStorage.getItem("opponentId"),personState:localStorage.getItem("state")};y.fetch("/operate","get",o,function(e){e&&0==e.result&&n.setState({selectedItem:""})})}},{key:"reverseChess",value:function(e){var t=this.state.items,n=this.state.semaphore;t[e.x-1][e.y-1].state="DISPLAY";var o=localStorage.getItem("role");"CONSUMER"==o?(n=0,this.setState({items:t,semaphore:n}),this.commonReverseChess(e.id)):"PRODUCER"==o&&(n=1,this.setState({items:t,semaphore:n}),this.commonReverseChess(e.id)),o||(n=0,this.setState({items:t,semaphore:n}),this.firstReverseChess(e.id,e.color))}},{key:"commonReverseChess",value:function(e){var t=this,n=localStorage.getItem("id"),o=localStorage.getItem("opponentId"),r=localStorage.getItem("state");"ACTIVE"==r?localStorage.setItem("state","LOCK"):"LOCK"==r&&localStorage.setItem("state","ACTIVE");var a={personId:n,opponentId:o,personState:r=localStorage.getItem("state"),chessId:e};y.fetch("/reverseChess","get",a,function(e){if(e&&1==e.result){var n=localStorage.getItem("state"),o=t.state.semaphore;"PRODUCER"==n?o+=1:"CONSUMER"==n&&(o-=1),t.setState({semaphore:o})}})}},{key:"firstReverseChess",value:function(e,t){localStorage.setItem("role","CONSUMER");var n=localStorage.getItem("id"),o=localStorage.getItem("opponentId"),r={chessId:e,personId:n,opponentId:o,color:t};y.fetch("/firstReverseChess","get",r,function(e){e&&0==e.result&&y.fetch("/queryPersonById","get",{id:n},function(e){e&&(localStorage.setItem("color",e.color),localStorage.setItem("state",e.state))})})}},{key:"handleCancel",value:function(){m.a.success("和局")}},{key:"handleRest",value:function(){var e=this;y.fetch("/initData","get","",function(t){t&&0==t.result?(m.a.success("重开成功"),e.setState({role:"CONSUMER",semaphore:1})):m.a.error("重开失败")})}},{key:"render",value:function(){var e=this,t=this.state,n=t.items,o=t.selectedItem,r=t.selectedItemBackgroudColor,a=t.semaphore,l=t.role;return i.a.createElement("div",{className:"btn-margin"},i.a.createElement("div",{className:"monitor-frame"},i.a.createElement("div",{className:"layout-operation"},i.a.createElement(s.a,{type:"primary",size:"large",onClick:this.handleRest.bind(this)},"重开"),i.a.createElement(s.a,{type:"primary",onClick:this.handleCancel.bind(this)},"结束")),i.a.createElement("div",{className:"chess-container"},n.map(function(t,n){return i.a.createElement(f.a,{key:n},t.map(function(t,n){return i.a.createElement(p.a,{span:3,key:n},i.a.createElement(s.a,{shape:"circle",style:{color:t?t.color:"#fff",backgroundColor:o&&o.x==t.x&&o.y==t.y?r:"tan"},onClick:e.onSelect.bind(e,t),disabled:"CONSUMER"==l&&0==a||"PRODUCER"==l&&1==a},t&&"DISPLAY"==t.state?t.name:""))}))}))))}}])&&b(n.prototype,o),r&&b(n,r),t}();n(113);function x(e){return(x="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function w(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function E(e,t){return!t||"object"!==x(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function C(e){return(C=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function k(e,t){return(k=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var P=function(e){function t(e){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),E(this,C(t).call(this,e))}var n,o,r;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&k(e,t)}(t,a["Component"]),n=t,(o=[{key:"componentDidMount",value:function(){}},{key:"logout",value:function(){localStorage.clear(),window.location.href="/login"}},{key:"render",value:function(){var e=this.props.children;return i.a.createElement("div",{className:"layout-aside"},i.a.createElement("div",{className:"layout-main"},i.a.createElement("div",{className:"header"},i.a.createElement("div",{className:"title"},"棋牌游戏"),i.a.createElement("div",{className:"logout"},i.a.createElement("span",null,"当前用户: ",localStorage.getItem("username")),i.a.createElement(s.a,{type:"primary",size:"small",className:"logout-btn",onClick:this.logout.bind(this)},i.a.createElement(u.a,{type:"logout"}),"退出系统"))),i.a.createElement("div",{className:"layout-container"},i.a.createElement("div",{className:"layout-content"},i.a.createElement(c.a,{path:"/chess",breadcrumbName:"FTP 监控",component:O}),e))))}}])&&w(n.prototype,o),r&&w(n,r),t}(),j=(n(189),n(43)),_=(n(190),n(93));function N(e){return(N="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function R(){return(R=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e}).apply(this,arguments)}function M(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function T(e,t){return!t||"object"!==N(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function U(e){return(U=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function D(e,t){return(D=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var A=function(e){function t(e){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(n=T(this,U(t).call(this,e))).state={username:"",password:""},n}var n,o,r;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&D(e,t)}(t,a["Component"]),n=t,(o=[{key:"componentDidMount",value:function(){}},{key:"handleInputUsername",value:function(e){var t=e.target.value;this.setState({username:t})}},{key:"handleInputPassword",value:function(e){var t=e.target.value;this.setState({password:t})}},{key:"handleSubmit",value:function(e){this.fetch({username:this.state.username,password:this.state.password})}},{key:"fetch",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};y.fetch("/logins","get",t,function(t){0==t.result?(t.data.id&&localStorage.setItem("id",t.data.id),t.data.username&&localStorage.setItem("username",t.data.username),t.data.state&&localStorage.setItem("state",t.data.state),t.data.role&&localStorage.setItem("role",t.data.role),t.data.opponentId&&localStorage.setItem("opponentId",t.data.opponentId),t.data.color&&localStorage.setItem("color",t.data.color),window.location.href="./chess"):1==t.result&&(e.setState({username:"",password:""}),m.a.error("用户名或密码错误！"))})}},{key:"render",value:function(){var e={labelCol:{span:7},wrapperCol:{span:6}};return i.a.createElement("div",null,i.a.createElement("div",{className:"login-container"},i.a.createElement("div",{className:"login-title"},i.a.createElement("span",{className:"sysName"},"棋盘游戏登录")),i.a.createElement(j.a,{className:"loginForm"},i.a.createElement(j.a.Item,R({},e,{label:"用户名"}),i.a.createElement(_.a,{onChange:this.handleInputUsername.bind(this),value:this.state.username})),i.a.createElement(j.a.Item,R({},e,{label:"密    码：",hasFeedback:!0}),i.a.createElement(_.a,{type:"password",autoComplete:"off",placeholder:"请输入密码",onChange:this.handleInputPassword.bind(this),value:this.state.password})),i.a.createElement(j.a.Item,{wrapperCol:{span:12,offset:7}},i.a.createElement(s.a,{type:"primary",className:"loginBtn",style:{width:228},onClick:this.handleSubmit.bind(this)},"登      录")))))}}])&&M(n.prototype,o),r&&M(n,r),t}();n(257);function L(e){return(L="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function B(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function H(e,t){return!t||"object"!==L(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function F(e){return(F=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function V(e,t){return(V=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var z,K=((z=document.createElement("pre")).innerHTML='<div id="root"></div>',z);document.body.appendChild(K);var Y=function(e){function t(e){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),H(this,F(t).call(this,e))}var n,o,r;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&V(e,t)}(t,i.a.Component),n=t,(o=[{key:"render",value:function(){return i.a.createElement(l.a,null,i.a.createElement("div",null,i.a.createElement(c.c,null,i.a.createElement(c.a,{path:"/login",breadcrumbName:"登录",component:A}),i.a.createElement(c.a,{path:"/",breadcrumbName:"主页",component:P}))))}}])&&B(n.prototype,o),r&&B(n,r),t}();r.a.render(i.a.createElement(Y,null),document.getElementById("root"))},257:function(e,t){},98:function(e,t,n){var o=n(136);"string"==typeof o&&(o=[[e.i,o,""]]);var r={hmr:!0,transform:void 0,insertInto:void 0};n(96)(o,r);o.locals&&(e.exports=o.locals)}});